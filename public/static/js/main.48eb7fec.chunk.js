(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/icon-logout.2cab0046.svg"},22:function(e,t,a){e.exports=a.p+"static/media/icon-trash.297e854f.svg"},24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),s=(a(29),a(3)),l=a(8);function i(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){localStorage.authToken&&o(!0)}),[a]),r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"nav"},r.a.createElement(l.b,{to:"/",className:"nav__logo"},"Shop 2000"),r.a.createElement("ul",{className:"nav__list"},a?r.a.createElement("li",{className:"nav__item"},r.a.createElement(l.b,{to:"/user/list",className:"nav__link"},"Your List")):null,r.a.createElement("li",{className:"nav__item"},r.a.createElement(l.b,{to:"/user/login",className:"nav__link"},"Log In")))))}function u(){return r.a.createElement("main",{className:"main"},r.a.createElement("h1",null,"Create Personalized Shopping Lists"))}var m=a(6),p=a.n(m),f=a(9),g=a(1);function b(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(!1),b=Object(s.a)(m,2),h=b[0],E=b[1],d=Object(n.useState)(""),v=Object(s.a)(d,2),N=v[0],_=v[1],j=Object(g.g)();return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var t,n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:return"/api/user/login",t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:i})},e.prev=4,e.next=7,fetch("/api/user/login",t);case 7:return n=e.sent,e.next=10,n.json();case 10:if(!(r=e.sent).hasOwnProperty("error")){e.next=15;break}return _(r.error),E(!1),e.abrupt("return");case 15:o=r,localStorage.setItem("authToken",o),E(!1),j.push("/user/list"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),E(!1),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[h]),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E(!0)},className:"login-form form"},N?r.a.createElement("h3",{className:"form__error"},N):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login-email",className:"form-group__label"},"Email"),r.a.createElement("input",{onChange:function(e){return o(e.target.value)},type:"email",id:"login-email",name:"login-email",className:"form-group__input"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login-password",className:"form-group__label"},"Password"),r.a.createElement("input",{onChange:function(e){return u(e.target.value)},type:"password",id:"login-password",name:"login-password",className:"form-group__input"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"form-group__submit"},"Submit")))}function h(){return r.a.createElement("main",{className:"main"},r.a.createElement("h1",{className:"login-title"},"Login Page"),r.a.createElement(b,null))}var E=a(21),d=a.n(E);function v(){var e=Object(g.g)();return r.a.createElement("div",{className:"logout-group"},r.a.createElement("img",{src:d.a,alt:"Log out icon",className:"logout-icon"}),r.a.createElement("button",{onClick:function(t){localStorage.length>0&&localStorage.clear(),e.push("/user/login")},className:"logout-btn"},"Log Out"))}var N=a(23),_=a(22),j=a.n(_);function O(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],u=l[1];function m(){return(m=Object(f.a)(p.a.mark((function e(t){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"/api/user/items",n={method:"POST",headers:{authorization:"Bearer ".concat(localStorage.authToken),"Content-Type":"application/json"},body:JSON.stringify({name:i})},e.prev=3,e.next=6,fetch("/api/user/items",n);case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,o([].concat(Object(N.a)(a),[c])),u(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function b(){return(b=Object(f.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(a.filter((function(e){return e._id!==t}))),n="/api/user/items/".concat(t),r={method:"DELETE",headers:{authorization:"Bearer ".concat(localStorage.authToken),"Content-Type":"application/json"}},e.next=6,fetch(n,r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/user/items",t={method:"GET",headers:{authorization:"Bearer ".concat(localStorage.authToken),"Content-Type":"application/json"}},e.next=5,fetch("/api/user/items",t);case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,o(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),localStorage.getItem("authToken")?r.a.createElement("main",{className:"main"},r.a.createElement("form",{onSubmit:function(e){return m.apply(this,arguments)},className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:function(e){return u(e.target.value)},value:i,name:"name",id:"item",placeholder:"Enter new item",type:"text",className:"form-group__input"})),r.a.createElement("button",{type:"submit",className:"form-group__submit"},"Add Item")),r.a.createElement("ul",{className:"shopping-list"},a.map((function(e){var t=e._id,a=e.name;return r.a.createElement("li",{className:"shopping-list__item",key:t},r.a.createElement("button",{onClick:function(){return function(e){return b.apply(this,arguments)}(t)},className:"shopping-list__item__delete"},r.a.createElement("img",{src:j.a,alt:"Trashcan delete icon",className:"delete-icon"})),r.a.createElement("span",null,a))}))),r.a.createElement(v,null)):r.a.createElement(g.a,{to:"/user/login"})}function y(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(""),b=Object(s.a)(m,2),h=b[0],E=b[1],d=Object(n.useState)(!1),v=Object(s.a)(d,2),N=v[0],_=v[1],j=Object(n.useState)(""),O=Object(s.a)(j,2),y=O[0],S=O[1],w=Object(g.g)();return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:return"/api/user/register",t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:i,password:h})},e.prev=4,e.next=7,fetch("/api/user/register",t);case 7:return n=e.sent,e.next=10,n.json();case 10:if(!(r=e.sent).hasOwnProperty("error")){e.next=15;break}return S(r.error),_(!1),e.abrupt("return");case 15:_(!1),w.push("/user/login"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),_(!1),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,19]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N]),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),_(!0)},className:"login-form form"},y?r.a.createElement("h3",{className:"form__error"},y):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login-name",className:"form-group__label"},"Name"),r.a.createElement("input",{onChange:function(e){return o(e.target.value)},type:"text",id:"login-name",name:"login-name",className:"form-group__input"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login-email",className:"form-group__label"},"Email"),r.a.createElement("input",{onChange:function(e){return u(e.target.value)},type:"email",id:"login-email",name:"login-email",className:"form-group__input"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login-password",className:"form-group__label"},"Password"),r.a.createElement("input",{onChange:function(e){return E(e.target.value)},type:"password",id:"login-password",name:"login-password",className:"form-group__input"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"form-group__submit"},"Submit")))}function S(){return r.a.createElement("main",{className:"main"},r.a.createElement("h1",{className:"signup-title"},"Sign Up"),r.a.createElement(y,null))}var w=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,component:u}),r.a.createElement(g.b,{path:"/user/signup",exact:!0,component:S}),r.a.createElement(g.b,{path:"/user/login",exact:!0,component:h}),r.a.createElement(g.b,{path:"/user/logout",exact:!0,component:v}),r.a.createElement(g.b,{path:"/user/list",exact:!0,component:O}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.48eb7fec.chunk.js.map